import re

# 读取文件内容
file_path = 'D:\\Users\\00596\\Desktop\\wenTiJi\\ai_analysis.py'
with open(file_path, 'r', encoding='utf-8') as f:
    content = f.read()

# 修复所有跨越多行的 f-string
# 修复通义千问API失败返回值
content = re.sub(
    r"return f\"基于历史数据分析，针对您的查询 '([^']*)'，我们发现了以下设计建议：\s+1\\. 在设计阶段应特别注意材料选择\s+2\\. 建议增加冗余设计提高可靠性\s+3\\. 考虑环境因素对设备的影响\"",
    r"return f\"基于历史数据分析，针对您的查询 '\\1'，我们发现了以下设计建议：\\n\\n1. 在设计阶段应特别注意材料选择\\n2. 建议增加冗余设计提高可靠性\\n3. 考虑环境因素对设备的影响\"",
    content
)

# 修复通用AI查询失败返回值
content = re.sub(
    r"return f\"针对您的查询 '([^']*)'，建议在设计时考虑以下几个方面：\s+1\\. 材料选择的可靠性\s+2\\. 环境适应性设计\s+3\\. 维护便利性\"",
    r"return f\"针对您的查询 '\\1'，建议在设计时考虑以下几个方面：\\n\\n1. 材料选择的可靠性\\n2. 环境适应性设计\\n3. 维护便利性\"",
    content
)

# 修复模拟响应部分
content = re.sub(
    r"return f\"基于历史数据分析，针对您的查询 '([^']*)'，我们发现了以下设计建议：\s+1\\. 在设计阶段应特别注意材料选择\s+2\\. 建议增加冗余设计提高可靠性\s+3\\. 考虑环境因素对设备的影响\"",
    r"return f\"基于历史数据分析，针对您的查询 '\\1'，我们发现了以下设计建议：\\n\\n1. 在设计阶段应特别注意材料选择\\n2. 建议增加冗余设计提高可靠性\\n3. 考虑环境因素对设备的影响\"",
    content
)

# 写回文件
with open(file_path, 'w', encoding='utf-8') as f:
    f.write(content)

print("已修复所有 f-string 语法错误")